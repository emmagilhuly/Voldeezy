3. Refactor to abstract logic
